Plugin: Holodeck
===========

Summary
-------
When device tries to interact with uninitialized peripherals via MMIO, return values from config file, as if a peripheral was really there. When using weak peripheral models (e.g., fixed sequences of return values), it's important to run QEmu with consistent arguments.

For now, config files are generated by holodeck (the repository, not this plugin) with `dump-state.py generations/X output_config.yaml`

Arguments
---------
`config` path to a holodeck configuration file


Dependencies
------------
Holodeck depends on yaml-cpp which can be installed with:
`apt install libyaml-cpp0.5v5 libyaml-cpp-dev`

APIs and Callbacks
------------------

Example
-------
To run with the Turris Omnia, you'll need the path to its zImage and initramfs, both of which are in the holodeck repository, then run with the following arguments

```
./arm-softmmu/qemu-system-arm -kernel [PATH_TO_HOLODECK]/firmwares/turris_omnia/omnia-kernel-4.4.138-zImage -initrd [PATH_TO_HOLODECK]/firmwares/turris_omnia/omnia-initramfs-modded.cpio -append "console=ttyS0,115200 debug lpj=10000 rootfstype=ext4 root=/dev/vda1" -cpu cortex-a9 -nographic -panda holodeck:config=config.yaml
```
